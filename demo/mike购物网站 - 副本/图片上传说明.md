# 图片上传功能说明

## 功能概述

在商品管理页面中添加了真实的图片上传功能，包括：
- 图片文件选择
- 图片预览
- 文件类型和大小验证
- 真实的图片上传到服务器

## 使用方法

1. 访问商品管理页面：`http://localhost:5174/#/admin/products`
2. 点击"添加商品"按钮
3. 填写商品信息
4. 在"商品图片"字段选择图片文件
5. 点击"保存"按钮

## 技术实现

### 前端
- 使用Vue 3 + TypeScript
- 使用axios发送HTTP请求
- 使用FileReader API进行图片预览
- 使用FormData对象处理文件上传

### 后端
- 使用Express.js搭建服务器
- 使用multer中间件处理文件上传
- 支持图片文件类型验证
- 支持文件大小限制（5MB）

## 服务器配置

### 启动上传服务器
```bash
cd e:\mike购物网站
node upload-server.js
```

### 服务器信息
- 端口：3001
- 上传接口：`POST http://localhost:3001/api/upload`
- 静态文件服务：`http://localhost:3001/uploads/`

## 功能特性

### 文件验证
- 只允许上传图片文件（image/*）
- 文件大小限制：5MB
- 自动生成唯一文件名

### 错误处理
- 文件类型错误提示
- 文件大小超限提示
- 上传失败提示
- 上传进度显示

### 图片预览
- 选择图片后立即显示预览
- 支持常见图片格式
- 响应式预览尺寸

## 注意事项

1. 确保上传服务器正在运行（端口3001）
2. 上传的图片会保存在`uploads`目录中
3. 图片URL会保存到商品数据中
4. 支持的图片格式：jpg, jpeg, png, gif, webp等
5. 建议图片大小不要超过1MB以获得更好的上传体验

## 故障排除

### 上传失败
- 检查上传服务器是否运行
- 检查网络连接
- 检查文件类型和大小
- 查看浏览器控制台错误信息

### 预览不显示
- 检查是否选择了图片文件
- 检查浏览器是否支持FileReader API
- 查看JavaScript控制台错误

### 服务器错误
- 检查uploads目录权限
- 检查端口3001是否被占用
- 查看服务器控制台错误信息